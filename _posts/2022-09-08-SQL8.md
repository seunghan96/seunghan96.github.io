---
title: (Chapter 8) Storage and File Structure
categories: [SQL,CS]
tags: [SQL]
excerpt: 연세대학교 데이터베이스 시스템 수업 (CSI6541)
---

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
( 출처 : 연세대학교 데이터베이스 시스템 수업 (CSI6541) 강의자료 )

# Chapter 8. Storage and File Structure

![figure2](/assets/img/sql/img18.png)

<br>

Contents

- Overview of Physical Storage Media
- Magnetic Disks and Flash Storage
- File Organization
- Organization of Records in Files
- Data Dictionary Storage

<br>

### (1) Classification of Physical Storage Media

Criteria

- (1) speed
  - speed with which **data can be accessed**
- (2) cost
  - cost per **unit of data**
- (3) reliability
  - **data loss** on power failure / system crash
  - **physical failure** of storage device

- (4) volatility
  - (4-1) volatile storage
    - switch off $\rightarrow$ lose contents
  - (4-2) non-volatie storage
    - switch off $\rightarrow$ contents persists
    - Ex) secondary and tertiary storage, battery backed-up main memory

<br>

### (2) Storage Hierarchcy

![figure2](/assets/img/sql/img47.png)

<br>

1. Primary Storage
   - Fastest / Volatile
   - ex) cache, main memory
2. Secondary Storage
   - Non-volatile / Moderately fast
   - called **on-line storage**
   - ex) flash memory, magnetic disks
3. Tertiary Storage
   - Non-volatile / Slow
   - called **off-line storage**
   - ex) optical disk, magnetic tape

<br>

**Magnetic Hard Disk Mechanism**

![figure2](/assets/img/sql/img48.png)

<br>

### (3) Optimization of Disk-Block Access

Block

- a contiguous sequence of sectors from a single track
- data is transferred between "disk" & "main memory" in blocks
- size : 512 bytes ~ XXX kilobytes

<br>

Disk-arm scheduling algorithms

- order pending access to tracks, **so that disk arm movement is minimized**

<br>

Details

- to reduce block-access time,

  we can organize blocks on disks in a way that corresponds to **how data will be accessed**

- ex) store related info in **same / nearby cylinders**

- however... 

  - FRAGMENTATION : blocks may be get **scattered all over the disk**, by insertion/deletion
  - DE-FRAGMENTATION : some systems have utilities for de-fragmentation

<br>

### (4) Flash Storage

2 types of flash memory

- (1) **NAND**
- (2) **NOR**

<br>

Details :

- NAND : much higher storage capacity ( for a given cost )

- widely used for data storage, in **camera, music players, cell phones...**

- lower cost per byte ( than main memory )

- non-volatile

- requires **page-at-a-time read**

  - page : 512 bytes ~ 4kB

- transfer rate : 20 mb/ sec

- **solid state disks** : use multiple flash storage devices, to provide higher transfer rate

  ( 100 ~ 200 mb / sec)

- once written, flash page **cannot be directly overwritten**

  ( has been erased & rewritten subsequently )

- Erase opration :

  - performed on number of pages, called **erase blocks**

- there is a limit to **how many times a flash page can be erased**

  ( 100,000 ~ 1,000,000 times ... **wear leveling** )

- **flash memory system** :

  - reduces the impact of these problems, using a software layer called **FTL (Flash Translation Layer)**

<br>

### (5) File Organilzation

DB : stored as a collection of **files**

- File : organized logically as a sequence of **records**

<br>

Each file : logically partitioned into **fixed-length storage units** ( = **blocks** )

- blocks = units of both **storage allocation** & **data transfer**

<br>

One approach :

- assume **record size is fixed**
- each file has **records of one particular type only**
- different files for different relations

$\rightarrow$ easiest to implement!

( later....will deal with **variable length records** )

<br>

### (6) Fixed-Length records

Simple approach

- store record $i$, starting from byte $n*i$
  - $n$ = size of each record
- record access is simple ..... but **records may cross blocks**

<br>

Deletion of record $i$ : alternatives

- (1) move records
  - (from) $i+1, \cdots m$
  - (to) $i, \cdots m-1$
- (2) do not move records, but link all free records on a free list

<br>

Free List :

- 